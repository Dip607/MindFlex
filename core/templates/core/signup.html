{% extends 'core/base.html' %}

{% block content %}
<h2>Sign Up</h2>

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}

  <h4>Account Info</h4>
  {{ user_form.as_p }}

  <h4>Profile Info</h4>

  <p>
    {{ profile_form.city.label_tag }}
    {{ profile_form.city }}
  </p>
  <p>
    {{ profile_form.gender.label_tag }}
    {{ profile_form.gender }}
  </p>
  <p>
    {{ profile_form.budget.label_tag }}
    {{ profile_form.budget }}
  </p>
  <p>
    {{ profile_form.cleanliness.label_tag }}
    {{ profile_form.cleanliness }}
  </p>
  <p>
    {{ profile_form.sleep_schedule.label_tag }}
    {{ profile_form.sleep_schedule }}
  </p>
  <p>
    {{ profile_form.introvert_extrovert.label_tag }}
    {{ profile_form.introvert_extrovert }}
  </p>
  <p>
    {{ profile_form.tags.label_tag }}
    {{ profile_form.tags }}
  </p>
  <p>
    {{ profile_form.bio.label_tag }}
    {{ profile_form.bio }}
  </p>
  <p>
    {{ profile_form.profile_pic.label_tag }}
    {{ profile_form.profile_pic }}
  </p>
  <p>
    {{ profile_form.college_id.label_tag }}
    {{ profile_form.college_id }}
  </p>

  <!-- 📍 Hidden fields to store location -->
  <input type="hidden" name="latitude" id="latitude">
  <input type="hidden" name="longitude" id="longitude">

  <button type="submit" class="btn btn-primary">Sign Up</button>
</form>

<!-- 📍 Geolocation Script -->
<script>
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function (position) {
      document.getElementById('latitude').value = position.coords.latitude;
      document.getElementById('longitude').value = position.coords.longitude;
    }, function (error) {
      console.log("Geolocation error:", error.message);
    });
  } else {
    console.log("Geolocation is not supported by this browser.");
  }
</script>
{% endblock %}
